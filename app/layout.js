'use client'
import { Inter } from "next/font/google";
import "./globals.css";
import { useEffect } from "react";
import FilterState from "./context/filterState";
import { useRouter } from "next/navigation";
import { getCookie, hasCookie, setCookie } from 'cookies-next';
import { Webchat, WebchatProvider, useClient } from '@botpress/webchat'
import Chatbot from "./components/Chatbot";
const inter = Inter({ subsets: ["latin"] });

// export const metadata = {
//   title: "CareerCanvas",
//   description: "Generated by create next app",
// };

export default function RootLayout({ children }) {
  const clientId = '89b5f0d5-a996-4cf0-9f83-709029ab30c6'
  const client = useClient({clientId })
  // const initBotPress = () => {
  //   window.botpressWebChat.init({
  //     "composerPlaceholder": "How may I assist you?",
  //     "botConversationDescription": "I'm your AI assistant. Ask me anything you want.",
  //     "botId": "89b5f0d5-a996-4cf0-9f83-709029ab30c6",
  //     "hostUrl": "https://cdn.botpress.cloud/webchat/v1",
  //     "messagingUrl": "https://messaging.botpress.cloud",
  //     "clientId": "89b5f0d5-a996-4cf0-9f83-709029ab30c6",
  //     "webhookId": "76602443-c712-469f-81e9-4c06c3160d0a",
  //     "lazySocket": true,
  //     "themeName": "prism",
  //     "botName": "CareerCanvas AI Assistant",
  //     "frontendVersion": "v1",
  //     "useSessionStorage": true,
  //     "showPoweredBy": true,
  //     "theme": "prism",
  //     "themeColor": "#2563eb",
  //     "allowedOrigins": []
  //   })
  // }
  const router  = useRouter();
  
  const languages =  {
    English : '/auto/en',
    Assamese : '/auto/as',
    Bengali : '/auto/bn',
    Gujarati : '/auto/gu',
    Hindi : '/auto/hi',
    Kannada : '/auto/kn',
    Konkani : '/auto/kok',
    Malayalam : '/auto/ml',
    Marathi : '/auto/mr',
    Nepali : '/auto/ne',
    Oriya : '/auto/or',
    Punjabi : '/auto/pa',
    Sanskrit : '/auto/sa',
    Sindhi : '/auto/sd',
    Tamil : '/auto/ta',
    Telugu : '/auto/te',
    Urdu : '/auto/ur',
    Maithili : '/auto/mai',
    Dogri : '/auto/doi'
  }

    // console.log(languages['English']);
 
    const langChange = (lang) => {
      console.log("done");
      // if (hasCookie('googtrans')) {
          setCookie('googtrans', languages[lang]);
          // setSelected(e)
      // }
      window.location.reload()
  }

  // useEffect(() => {
  //   if (typeof window !== 'undefined') {
  //     import('@alan-ai/alan-sdk-web').then(({ default: alanBtn }) => {
  //       alanBtn({
  //         key: 'b71b2e5cb15cf5bcd70552aeca9033062e956eca572e1d8b807a3e2338fdd0dc/stage',
  //         onCommand:({command, final, lang})=>{
  //           if(command==='navigateToDiscussion'){
  //             router.push('/discussion')
  //           }
  //           else if(command==='navigateToDashboard'){
  //             router.push('/dashboard')
  //           }
  //           else if(command==='navigateToHome'){
  //             router.push('/')
  //           }
  //           else if(command==='goBack'){
  //             router.back();
  //           }
  //           else if(command==='goToRoadmap'){
  //             router.push(`/roadmap/${final}`);
  //           }
  //           else if(command==='changeLanguage'){
  //             console.log('done');
  //             langChange(lang);
  //           }
  //         }
  //       });

  //     });
  //   }

  // }, []);
  return (
    <html lang="en">
      <head>
      {/* <script src="https://cdn.botpress.cloud/webchat/v1/inject.js"
        onLoad={()=>{
          initBotPress();
        }}
        ></script> */}
      </head>
      <body className={inter.className}>
          <FilterState>
      {/* <WebchatProvider client={client} theme={theme}>

            <Webchat/> */}
            {children}
            <Chatbot/>
      {/* </WebchatProvider> */}
          </FilterState>
       
      </body>
    </html>
  );
}
